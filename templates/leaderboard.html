<html>
  <head>
    <title>Flask Intro - login page</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" media="screen" href="{{ url_for('static', filename='stylesheets/leaderboard.css') }}" />
  </head>
  <body>
    <div class="container">
        <div id="leaderboard">
          <h1>Leaderboard</h1><br>
          <div id="bull"></div><br>
          <br>
          <div id="shit"></div>
      </div>
      <div id="filler"></div>
    </div>
  </body>
  <script src="https://www.gstatic.com/firebasejs/3.1.0/firebase.js"></script>
  <script>
    var config = {
      apiKey: "AIzaSyDq5GXyq96eg0FsUOfVM4XhH1cBS57m4C8",
      authDomain: "minigames-15a0f.firebaseapp.com",
      databaseURL: "https://minigames-15a0f.firebaseio.com",
      storageBucket: "minigames-15a0f.appspot.com",
    };
    firebase.initializeApp(config);
    firebase.database().ref("/").once("value").then(function(snapshot) {
      var name = "{{name}}";
      var snap = snapshot.val();
      var score = snap.name;
      var sortable = [];
      for (var user in snap)
            sortable.push([user, snap[user]])
      sortable.sort(
          function(a, b) {
              return a[1] - b[1]
          }
      );
      var users = sortable[0][1];
      for (var i = 0; i < Math.min(20, users.length); i ++) {
        if (users[i]["name"] == name) {
          score = users[i]["score"]
          document.getElementById("bull").innerHTML += "<h2>" + (i+1).toString() +
          ": {{name}} <span>" + score.toString() + "</span></h2>";
        };
        document.getElementById("shit").innerHTML +=
        "<p>" + (i+1).toString() + ": " + users[i]["name"] + " <span>" + users[i]["score"].toString() + "</span></p>";
      };

    });
  </script>
</html>
